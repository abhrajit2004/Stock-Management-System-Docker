{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ABHRAJIT%20GUPTA/OneDrive/Documents/docker-version-of-binarystock/app/api/action/route.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(request) {\r\n\r\n    let { action, slug, initialQuantity } = await request.json();\r\n\r\n    // Replace the uri string with your connection string\r\n    const uri = process.env.MONGO_URI;\r\n\r\n    const client = new MongoClient(uri);\r\n\r\n    try {\r\n        const database = client.db(\"stock\");\r\n        const inventory = database.collection(\"inventory\");\r\n        // Create a filter for movies with the title \"Random Harvest\"\r\n        const filter = { slug: slug };\r\n\r\n        let newQuantity = action == \"plus\" ? parseInt(initialQuantity) + 1 : parseInt(initialQuantity) - 1;\r\n    \r\n        const updateDoc = {\r\n            $set: {\r\n                quantity: newQuantity\r\n            },\r\n        };\r\n        // Update the first document that matches the filter\r\n        const result = await inventory.updateOne(filter, updateDoc);\r\n\r\n        \r\n        return NextResponse.json({ success: true, message: `${result.matchedCount} document(s) matched the filter, updated ${result.modifiedCount} document(s)` });\r\n        \r\n    } finally {\r\n        // Close the connection after the operation completes\r\n        await client.close();\r\n    }\r\n\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAO;IAE9B,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,GAAG,MAAM,QAAQ,IAAI;IAE1D,qDAAqD;IACrD,MAAM,MAAM,QAAQ,GAAG,CAAC,SAAS;IAEjC,MAAM,SAAS,IAAI,sHAAW,CAAC;IAE/B,IAAI;QACA,MAAM,WAAW,OAAO,EAAE,CAAC;QAC3B,MAAM,YAAY,SAAS,UAAU,CAAC;QACtC,6DAA6D;QAC7D,MAAM,SAAS;YAAE,MAAM;QAAK;QAE5B,IAAI,cAAc,UAAU,SAAS,SAAS,mBAAmB,IAAI,SAAS,mBAAmB;QAEjG,MAAM,YAAY;YACd,MAAM;gBACF,UAAU;YACd;QACJ;QACA,oDAAoD;QACpD,MAAM,SAAS,MAAM,UAAU,SAAS,CAAC,QAAQ;QAGjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS,GAAG,OAAO,YAAY,CAAC,yCAAyC,EAAE,OAAO,aAAa,CAAC,YAAY,CAAC;QAAC;IAE5J,SAAU;QACN,qDAAqD;QACrD,MAAM,OAAO,KAAK;IACtB;AAEJ","debugId":null}}]
}